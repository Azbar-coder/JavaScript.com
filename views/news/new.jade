block current_nav
  - current_page = 'News'

block layout_variables
  - pageTitle = 'Submit New Post'
  - metaDescription = 'Submit a new post to JavaScript.com'

extends /views/layouts/layout

block content

  .has-alert
    include /views/partials/_flash

  section.row
    .cell.cell--s.well.well--l.well--m--xl

      .split.split--middle.mbl

        .split-cell
          .bucket.bucket--flag
            .bucket-media.tac
              img.thumb(src=avatar width=60)
            .bucket-content
              h1.h.h--2.mbf New Story

        .split-cell
          a.tfh(href='/news/signout') Sign Out


      form.form.js-formValidator(action='/news' method='POST')

        fieldset.form-field
          label
            span.form-label Title
          - titleValue = title ? title : ''
          input.form-input.js-formValidator-input(type='text' name='title' data-validate='required' required='true' value=titleValue)

        fieldset.form-field
          label
            span.form-label Link
          - urlValue = url ? url : ''
          input.form-input.js-formValidator-input(type='text' name='url' data-validate='required' required='true' value=urlValue)

        fieldset.form-field
          label
            span.form-label Description

          - bodyValue = body ? body : ''
          textarea.form-input.form-textarea.js-counter.js-formValidator-input(name='body' rows=8 data-validate='required' required='true')
            =bodyValue

          .split
            .split-cell
              p.mbf.tss.tcs.js-counter-message-min.is-hidden
                | Hmm, your description is a little short — it should be 
                strong at least 100 characters
                | .

              p.mbf.tss.tcs.js-counter-message-max.is-hidden
                | Hmm, your description is a little long — it should be 
                strong no more than 300 characters
                | .

            .split-cell
              span.tcs.tss.label.js-counter-label
                span.js-counter-number 0
                |  Characters

        .mtl
          input(type='hidden' name='_csrf' value=token)
          input.btn.btn--a.form-btn.js-formValidator-submit(type='submit' value='Submit')

block inline_javascript
  script.
    jQuery(function($) {
      JS.Services.expel({
        $toggle     : $('.js-alert-close'),
        elementNode : '.js-alert'
      });
    });
